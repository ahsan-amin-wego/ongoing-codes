### üîÑ Wego vs Provider API Flow Comparison

| **Stage**                                                                                               | **Provider Flow**                                                                                                                                                                                                 | **Provider (e.g., Air Arabia)**                     |
| ------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| üü¶ **Wego Search**                                                                                      | - `Auth API` ‚Üí Get token (used in Search API)  <br>- `Search` ‚Üí Get all flights  <br>- `GetPrice` ‚Üí For each flight, get accurate price (currently only round trip)                                               |                                                     |
| üü® **Compare Page**  <br><small><i>Based on selected itinerary, fetch branded fares & rules</i></small> | - `getPriceRequestAPI` ‚Üí Send itinerary  <br>- `GetPriceWithBrandedFare` ‚Üí Add brand info  <br>- `Baggage` ‚Üí Pass itinerary                                                                                       |                                                     |
| ‚úèÔ∏è **Pax Detail Page**  <br><small><i>After selecting a fare family</i></small>                         | - **Fare Rule** ‚Üí Hardcoded in Fare Rule class  <br>- **Dynamic Forms** ‚Üí Controlled by CMS                                                                                                                       |                                                     |
| ‚úÖ **After Entering Pax Detail**                                                                         | - `getPriceRequestAPI`  <br>- `GetPriceWithBrandedFare`  <br>- `Baggage`  <br>- `Meal`  <br>- `Seat`  <br>- `PriceWithAncillaries` ‚Üí Send selected ancillaries                                                    | - `Booking` ‚Üí No API; total and status manually set |
| üí≥ **Ticketing Page**  <br><small><i>After entering payment</i></small>                                 | - `Fare.Available` ‚Üí Set default as true                                                                                                                                                                          |                                                     |
| üîí **Enter Payment 3DS**                                                                                | - `Validate Booking` ‚Üí Return constant  <br>- `Ticketing` ‚Üí `Book API` ‚Üí Send itinerary, pax, payment info, and amount  <br>Returns:  <br>‚ÄÅ‚Ä¢ `ticketing status = 3` if success  <br>‚ÄÅ‚Ä¢ `BookingReferenceID` = PNR |                                                     |
| üìÑ **Booking Confirmation**                                                                             | - Status = In-progress                                                                                                                                                                                            |                                                     |
| üîÅ **QCT Crawler**                                                                                      | - Run every 5 minutes  <br>- Continuously checks actual ticket status                                                                                                                                             |                                                     |
| üì• **GetReservationByPNR**                                                                              | - API call to fetch booking by PNR                                                                                                                                                                                |                                                     |

---

### üßæ Additional Info

- **TPS Limit**: `30`
    
- **Postman Collection**: [Airarabia prod](https://wegotravel.postman.co/workspace/Flights~0db44570-5a4a-408e-b550-7ad29223a19b/collection/12581956-021de559-1b67-4e08-a759-82085abcafe0?action=share&creator=20363127&active-environment=25415493-a5dc4f75-9bcb-426a-bdc2-5547397ff6ab)
    
- **Jira Link**: [FBOWINT-23: Air Arabia API Integration](https://wego.com) _(closed)_